{% extends "base.html" %}

{% block head %}
<link href="{{url_for('static', filename='css/bootstrap.css')}}" rel="stylesheet">
<link href="{{url_for('static', filename='css/site.css')}}" rel="stylesheet">
<link href="{{url_for('static', filename='css/slick.css')}}" rel="stylesheet">
<link href="{{url_for('static', filename='css/style.css')}}" rel="stylesheet">
<link href="{{url_for('static', filename='css/my.css')}}" rel="stylesheet">
<link href="{{url_for('static', filename='css/slick-theme.css')}}" rel="stylesheet">
<script src="{{url_for('static', filename='js/fontawesome.js')}}" crossorigin="anonymous"></script>

<style>     
    body{background: url("{{url_for('static', filename='images/login_page_bg.jpg')}}");}
</style>
<style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style>
<style>
    .canvasjs-chart-credit{display:none;}
    .modal-content .col-md-3 img{margin:0 auto;}@media (min-width:769px) and (max-width:1024px){
    .detail-page-button-leaderboard .leaderboard-icon{width:39px!important;}
    .detail-page-button-leaderboard .leaderboard-icon img{width:30px!important;}
    .score-title{font-size:1rem!important;}
    .time-progress-counter{width:90%!important;}
    .leaderboard-title{font-size:1rem!important;}
    }
    @media (min-device-width:769px) and (max-device-width:1024px){
    .detail-page-button-leaderboard .leaderboard-icon{width:39px!important;}
    .detail-page-button-leaderboard .leaderboard-icon img{width:30px!important;}
    .score-title{font-size:1rem!important;}
    .time-progress-counter{width:90%!important;}
    .leaderboard-title{font-size:1rem!important;}
    }
    .cardcustom{
        background-color: #f0f0f0 !important;border:black !important;border-radius: 15px !important;border-style: solid !important;cursor:pointer !important;transition: 1s !important;
    }
    .cardcustom:hover{
        transform: scale(1.025) !important;
    }
</style>
{% endblock %}

{% block content %}

    <div class="preloader" id="loading">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <div id="main-wrapper" data-layout="horizontal" data-navbarbg="skin1" data-sidebartype="full" data-boxed-layout="boxed">
        <header class="topbar topline" data-navbarbg="skin1"></header>
        <div class="page-wrapper" style="display: block;">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark" style="border-bottom:1px solid #e2e3e5;">
                <div class="navbar-header">
                    <a class="navbar-brand" href="{{ url_for('admin') }}">
                        <b class="logo-icon">
                            <img src="{{url_for('static', filename='images/logo-trajectorie-codrive.png')}}" alt="Trajectorie : CODrive" width="130" class="light-logo">
                        </b>
                    </a>
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><i class="ti-menu ti-close"></i></a>
                </div>
                <div class="navbar-collapse collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav float-left mr-auto">
                        <li class="nav-item d-none d-md-block"><a class="nav-link sidebartoggler waves-effect waves-light" href="javascript:void(0)" data-sidebartype="mini-sidebar"><i class="mdi mdi-menu font-24"></i></a></li>
                        <li class="nav-item search-box"> <a class="nav-link waves-effect waves-dark" href="javascript:void(0)"><i class="ti-search"></i></a>
                            <form class="app-search position-absolute">
                                <input type="text" class="form-control" placeholder="Search &amp; enter"> <a class="srh-btn"><i class="ti-close"></i></a>
                            </form>
                        </li>
                    </ul>
                    <ul class="navbar-nav float-right">
                        <li class="nav-item"><a href="/admin/users" class="btn btn-rounded btn-success mr-2">USERS</a></li>
                        <li class="nav-item"><a href="/admin/clusters" class="btn btn-rounded btn-info mr-2">CLUSTERS</a></li>
                        <li class="nav-item"><a href="/adminview" class="btn  btn-rounded btn-red-trajectorie mr-2">NEW ROLEPLAY</a></li>
                        <li class="nav-item"><a href="{{ url_for('logout') }}" class="btn btn-rounded btn-danger"><i class="fas fa-sign-out-alt"></i> LOGOUT</a></li>
                    </ul>
                </div>
            </nav>

            
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-9 mx-auto">
                        {% with messages = get_flashed_messages() %}
                            {% if messages %}
                                    {% for message in messages %}
                                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    {% endfor %}
                            {% endif %}
                        {% endwith %}
                        {% for roleplay in roleplays %}
                        <div class="card cardcustom" id="roleplaynum{{roleplay[0]}}">
                            <div class="card-body">
                                <h5 class="card-title">{{roleplay[0]}}. {{roleplay[1]}}</h5>
                                <h6 class="card-subtitle mb-2 text-muted">{{roleplay[5]|striptags|truncate(100)}}</h6>
                                <a href="/admin/delete/{{roleplay[0]}}" class="btn btn-danger float-right" id="roleplaydelete{{roleplay[0]}}">Delete</a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

<script src="{{url_for('static', filename='js/jquery.js')}}"></script>
<script src="{{url_for('static', filename='js/jquery.min.js')}}"></script>
<script src="{{url_for('static', filename='js/popper.min.js')}}"></script>
<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
<script type="text/javascript">

$(document).ready(function () {
    $('#loading').hide();

    window.setTimeout(function() {
        $(".alert").fadeTo(1000, 0).slideUp(1000, function(){
            $(this).remove(); 
        });
    }, 5000);

    $('form').submit(function () {
        $('#loading').show();
    });

    $("[id^=roleplaynum]").click(function(e){
        var id = jQuery(this).attr("id").substr(11);
        if(e.target != document.getElementById('roleplaydelete'+id)) {
            window.location.href = "/adminview/"+id;
        }
    });
});
</script>
{% endblock %}